<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <div>hah</div>
    <script src="./lib/umd/single-spa.js"></script>
    <script>
      // 在规则被匹配时，会加载应用
      // 1、需要注册的应用名称
      // 2、加载 app 的方法，必须返回一个 Promise
      singleSpa.registerApplication(
        'app1',
        async () => {
          return {
            bootstrap: async () => {
              console.log('bootstrap')
            },
            mount: async () => {
              console.log('mount')
            },
            unmount: async () => {
              console.log('unmount')
            },
          }
        },
        (location) => location.hash.startsWith('#app1'),
        {
          userName: 'lane',
        }
      )

      singleSpa.registerApplication(
        'app2',
        async () => {
          return {
            bootstrap: async () => {
              console.log('bootstrap2')
            },
            mount: async () => {
              console.log('mount2')
            },
            unmount: async () => {
              console.log('unmount2')
            },
          }
        },
        (location) => location.hash.startsWith('#app2'),
        {
          userName: 'lane',
        }
      )

      // 启动应用，挂载应用
      singleSpa.start()
    </script>
  </body>
</html>
